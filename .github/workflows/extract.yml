name:
    Workflow

on:
    schedule:
      - cron: '0 0 * * 0'
    workflow_dispatch:

jobs:

    cron:
        runs-on: ubuntu-latest

        steps:
            - name: Checkout Repository
              uses: actions/checkout@v3

            - name: Set up Python
              uses: actions/setup-python@v4
              with:
                  python-version: '3.x'

            - name: Install Dependencies
              run: |
                  python -m pip install --upgrade pip
                  pip install pandas requests

            - name: Run Extraction Script
              run: |
                  python extract.py

            - name: Commit and Push Changes
              uses: stefanzweifel/git-auto-commit-action@v5
              with:
                commit_message: "Automated data extraction update"
                branch: main
